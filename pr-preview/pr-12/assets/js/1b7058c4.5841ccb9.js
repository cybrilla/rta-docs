"use strict";(self.webpackChunkrta_docs=self.webpackChunkrta_docs||[]).push([[3901],{9778:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var s=i(4848),r=i(8453);const t={sidebar_position:3,sidebar_label:"Transaction API",title:"Transaction API"},c=void 0,o={id:"api/api",title:"Transaction API",description:"POA endpoints, for action calls: /search, /select, /init, /confirm, /status, /update",source:"@site/docs/api/api.md",sourceDirName:"api",slug:"/api/",permalink:"/pr-preview/pr-12/docs/api/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Transaction API",title:"Transaction API"},sidebar:"sidebar",previous:{title:"Getting Started",permalink:"/pr-preview/pr-12/docs/getting-started"},next:{title:"Authentication",permalink:"/pr-preview/pr-12/docs/api/authn"}},l={},a=[{value:"Discovery",id:"discovery",level:2},{value:"Order Placement",id:"order-placement",level:2},{value:"Testing in Sandbox",id:"testing-in-sandbox",level:3},{value:"Orders",id:"orders",level:4},{value:"KYC Compliant",id:"kyc-compliant",level:4},{value:"Bank account verification",id:"bank-account-verification",level:4},{value:"Order Processing",id:"order-processing",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["POA endpoints, for ",(0,s.jsx)(n.code,{children:"action"})," calls: ",(0,s.jsx)(n.code,{children:"/search"}),", ",(0,s.jsx)(n.code,{children:"/select"}),", ",(0,s.jsx)(n.code,{children:"/init"}),", ",(0,s.jsx)(n.code,{children:"/confirm"}),", ",(0,s.jsx)(n.code,{children:"/status"}),", ",(0,s.jsx)(n.code,{children:"/update"}),(0,s.jsx)(n.br,{}),"\n","Your endpoints for ",(0,s.jsx)(n.code,{children:"on_action"})," callbacks: ",(0,s.jsx)(n.code,{children:"/on_search"}),", ",(0,s.jsx)(n.code,{children:"/on_select"}),", ",(0,s.jsx)(n.code,{children:"/on_init"}),", ",(0,s.jsx)(n.code,{children:"/on_confirm"}),", ",(0,s.jsx)(n.code,{children:"/on_status"}),", ",(0,s.jsx)(n.code,{children:"/on_update"})]}),"\n",(0,s.jsx)(n.p,{children:"The api has following stages"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Discovery"}),"\n",(0,s.jsx)(n.li,{children:"Order placement"}),"\n",(0,s.jsx)(n.li,{children:"Order processing"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"discovery",children:"Discovery"}),"\n",(0,s.jsxs)(n.p,{children:["You have to make a ",(0,s.jsx)(n.code,{children:"/search"})," action call to receive the list of available fund schemes (along with allowed transaction types [eg. lumpsum, sip etc.] and their respective thresholds [eg. min investment amount, allowed frequencies etc.]) in the ",(0,s.jsx)(n.code,{children:"/on_search"})," callback."]}),"\n",(0,s.jsx)(n.p,{children:"Sample json"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "intent": {\n        "category": {\n            "descriptor": {\n                "code": "MUTUAL_FUNDS"\n            }\n        },\n        "fulfillment": {\n            "agent": {\n                "organization": {\n                    "creds": [\n                        {\n                            "id": "ARN-125784",\n                            "type": "ARN" // can be `ARN` or `RIA`\n                        }\n                    ]\n                }\n            }\n        },\n        "tags": [\n            {\n                "display": false,\n                "descriptor": {"name": "BAP Terms of Engagement", "code": "BAP_TERMS"},\n                "list": [\n                    {\n                        // TODO: Is static terms mandatory? We should remove that\n                        "descriptor": {"name": "Static Terms (Transaction Level)", "code": "STATIC_TERMS"},\n                        "value": "https://buyerapp.com/legal/ondc:fis14/static_terms?v=0.1"\n                    },\n                    {\n                        "descriptor": {"name": "Offline Contract", "code": "OFFLINE_CONTRACT"},\n                        "value": "true"\n                    }\n                ]\n            }\n        ]\n    }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"order-placement",children:"Order Placement"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/select"}),": Use this to check the readiness and prepare the investor for placing an order. Typically all selections are made here."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/init"}),": Initialize the order",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Input"}),": All order details along with investor consent (2FA, IP address)",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Output"}),": Order ID with Order in ",(0,s.jsx)(n.code,{children:"CREATED"})," state"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"/confirm"}),": Confirm the order",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Input"}),": All order details along with the Order ID",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Output"}),": Order in ",(0,s.jsx)(n.code,{children:"ACCEPTED"})," state"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Detailed description and sequence diagrams: ",(0,s.jsx)(n.a,{href:"https://github.com/ONDC-Official/ONDC-FIS-Specifications/blob/release-FIS14-2.1.0/api/components/docs/stage-order.md",children:"https://github.com/ONDC-Official/ONDC-FIS-Specifications/blob/release-FIS14-2.1.0/api/components/docs/stage-order.md"})]}),"\n",(0,s.jsx)(n.h3,{id:"testing-in-sandbox",children:"Testing in Sandbox"}),"\n",(0,s.jsx)(n.h4,{id:"orders",children:"Orders"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["To simulate a successful order scenario, place the order with amount ending in ",(0,s.jsx)(n.code,{children:"0"})]}),"\n",(0,s.jsxs)(n.li,{children:["To simulate a failed order scenario, place the order with amount ending in ",(0,s.jsx)(n.code,{children:"1"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"kyc-compliant",children:"KYC Compliant"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["To simulate a KYC compliant investor flow, use any PAN number in the format: ",(0,s.jsx)(n.code,{children:"XXXPX3751X"})," (replace ",(0,s.jsx)(n.code,{children:"X"})," with any alphabet)"]}),"\n",(0,s.jsxs)(n.li,{children:["To simulate a KYC non-compliant investor flow, use any PAN number in the format: ",(0,s.jsx)(n.code,{children:"XXXPX3753X"})," (replace ",(0,s.jsx)(n.code,{children:"X"})," with any alphabet)"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"bank-account-verification",children:"Bank account verification"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["To simulate a successful verification, use bank account with number ending in ",(0,s.jsx)(n.code,{children:"1193"})]}),"\n",(0,s.jsxs)(n.li,{children:["To simulate a failed verification, use bank account with number ending in ",(0,s.jsx)(n.code,{children:"1515"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"order-processing",children:"Order Processing"}),"\n",(0,s.jsxs)(n.p,{children:["Once the order is accepted, and pre fulfillment conditions are met (eg. payment collection in case of purchase orders) POA starts the order processing. Processing states are represented in ",(0,s.jsx)(n.code,{children:"fulfillment"})," object."]}),"\n",(0,s.jsxs)(n.p,{children:["Detailed description: ",(0,s.jsx)(n.a,{href:"https://github.com/ONDC-Official/ONDC-FIS-Specifications/blob/release-FIS14-2.1.0/api/components/docs/stage-fulfillment.md",children:"https://github.com/ONDC-Official/ONDC-FIS-Specifications/blob/release-FIS14-2.1.0/api/components/docs/stage-fulfillment.md"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function c(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);